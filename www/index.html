<!DOCTYPE html>
<html>
  <head>
    <title>YTrends: What We Watch</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="css/bootstrap-theme.min.css" rel="stylesheet" media="screen">
    <link href="css/ytrends.css" rel="stylesheet" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
  </head>
  <body>

<div id="yt-video-modal" class="modal fade">
</div>

<div id="yt-alert" class="alert alert-warning" style="display:none;">
</div>

<!-- where the content goes -->
<div id="yt-content" class="container">

  <div class="row">
    <div class="col-md-8">
      <h1>What We Watch</h1>
    </div>
    <div class="col-md-4">
      <img src="img/c4cm-badge.gif" alt="MIT Center for Civic Media" class="pull-right"/>
    </div>
  </div>

  <div id="yt-map-container">
  </div>

  <div id="yt-connection-info" class="panel panel-default" style="display:none">
  </div>

  <div id="yt-info-box" class="panel panel-default" style="display:none">
  </div>

</div>

<!-- templates -->
<script type="text/template" id="yt-map-template">
</script>
<script type="text/template" id="yt-connection-info-template">
  <div class="panel-heading"><h2>... and <%=country2%></h2></div>
  <div class="panel-body">
    <div class="row"><div class="col-md-12"><p><b><%=percent%>%</b> of the top videos watched in <%=country1%> are also watched in <%=country2%>.</p></div></div>
    <div class="row"><div class="col-md-12"><ul class="yt-video-item-list"></ul></div></div>
  </div>
</script>
<script type="text/template" id="yt-full-video-template">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title"><%=title%></h4>
      </div>
      <div class="modal-body">
        <p><%=summary%></p>
        <iframe width="560" height="315" src="http://www.youtube.com/embed/<%=videoId%>?rel=0" frameborder="0" allowfullscreen></iframe>
      </div>
    </div>
  </div>
</script>
<script type="text/template" id="yt-alert-template">
  <%=msg%>
</script>
<script type="text/template" id="yt-info-box-template">
  <div class="panel-heading"><h2><%=title%></h2></div>
  <div class="panel-body">
    <div class="row"><div class="col-md-12"><%=content%></div></div>
  </div>
</script>
<script type="text/template" id="yt-country-details-template">
  <p>Based on what they're watching, <%=countryName%> has the strongest connections with:
    <ul id="yt-related-list"></ul>
  </p>
  <ul class="nav nav-tabs" id="country-video-list-nav">
    <li class="active"><a href="#yt-country-top">Top Videos</a></li>
    <li><a href="#yt-country-unique">"Unique" Videos</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="yt-country-top"><ul class="yt-video-item-list"></ul></div>
    <div class="tab-pane" id="yt-country-unique"><ul class="yt-video-item-list"></ul></div>
  </div>
</script>
<script type="text/template" id="yt-video-item-template">
  <img width="120" height="90" src="http://img.youtube.com/vi/<%=videoId%>/default.jpg" data-video-id="<%=videoId%>"/>
</script>

<!-- all the JS includes -->
<script type="text/Javascript" src="lib/jquery-1.10.2.min.js"></script>
<script type="text/Javascript" src="lib/underscore-min.js"></script>
<script type="text/Javascript" src="lib/backbone-min.js"></script>
<script type="text/Javascript" src="lib/bootstrap.min.js"></script>
<script type="text/Javascript" src="lib/d3.v3.min.js"></script>
<script type="text/Javascript" src="lib/d3.geo.projection.v0.min.js"></script>
<script type="text/Javascript" src="lib/topojson.v1.min.js"></script>

<!-- our application code -->
<script type="text/Javascript" src="lib/country-util.js"></script>
<script type="text/Javascript" src="app/routes.js"></script>
<script type="text/Javascript" src="app/models.js"></script>
<script type="text/Javascript" src="app/views.js"></script>

<script type="text/Javascript">
$(function(){
  // load the map and data
  ISO3166.initialize();
  window.allCountries = new Countries();
  allCountries.fetch({
    //url: "data/weights-count.json",
    //url: "data/weights-jaccard.json",
    url: "data/weights-bhattacharyya.json",
    success: function (collection, response, options) {
      window.countryRouter = new CountryRouter();
      window.mapView = new MapView();
      countryRouter.listenTo(mapView,"render.done",function(){
        Backbone.history.start();
      });
    }
  });
});
</script>

  </body>
</html>