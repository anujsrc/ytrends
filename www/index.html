<!DOCTYPE html>
<html>
  <head>
    <title>YTrends: What We Watch</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="css/bootstrap-theme.min.css" rel="stylesheet" media="screen">
    <link href="css/ytrends.css" rel="stylesheet" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
  </head>
  <body>

<div id="yt-video-modal" class="modal fade">
</div>

<div id="yt-alert" class="alert alert-warning" style="display:none;">
</div>

<!-- where the content goes -->
<div id="yt-content" class="container">

  <div class="row">
    <div class="col-md-8">
      <h1>What We Watch</h1>
    </div>
    <div class="col-md-4">
      <img src="img/c4cm-badge.gif" alt="MIT Center for Civic Media" class="pull-right"/>
    </div>
  </div>

  <div id="yt-map-container">
  </div>

  <div id="yt-video-list-container">
  </div>

  <div id="yt-info-box" class="panel panel-default" style="display:none">
  </div>

</div>


<!-- templates -->
<script type="text/template" id="yt-map-template">
</script>
<script type="text/template" id="yt-video-list-template">
<div class="well">
  <h3><%=country1%> and <%=country2%> both watch these videos:<h3>
  <div class="yt-video-item-list row">
  </div>
</div>
</script>
<script type="text/template" id="yt-video-item-template">
<div class="col-sm-4 col-md-2">
  <img width="120" height="90" src="http://img.youtube.com/vi/<%=videoId%>/default.jpg" data-video-id="<%=videoId%>"/>
</div>
</script>
<script type="text/template" id="yt-full-video-template">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title"><%=country1%> and <%=country2%> both watch this</h4>
      </div>
      <div class="modal-body">
        <iframe width="560" height="315" src="http://www.youtube.com/embed/<%=videoId%>?rel=0" frameborder="0" allowfullscreen></iframe>
      </div>
    </div>
  </div>
</script>
<script type="text/template" id="yt-alert-template">
<%=msg%>
</script>
<script type="text/template" id="yt-info-box-template">
  <div class="panel-heading">
    <h2><%=title%></h2>
  </div>
  <div class="panel-body"><%=content%></div>
</script>

<!-- all the JS includes -->
<script type="text/Javascript" src="lib/jquery-1.10.2.min.js"></script>
<script type="text/Javascript" src="lib/underscore-min.js"></script>
<script type="text/Javascript" src="lib/backbone-min.js"></script>
<script type="text/Javascript" src="lib/bootstrap.min.js"></script>
<script type="text/Javascript" src="lib/d3.v3.min.js"></script>
<script type="text/Javascript" src="lib/d3.geo.projection.v0.min.js"></script>
<script type="text/Javascript" src="lib/topojson.v1.min.js"></script>

<!-- our application code -->
<script type="text/Javascript" src="lib/iso3166.js"></script>
<script type="text/Javascript" src="lib/centroid.js"></script>
<script type="text/Javascript" src="app/models.js"></script>
<script type="text/Javascript" src="app/views.js"></script>

<script type="text/Javascript">
$(function(){
  // load the map and data
  ISO3166.initialize();
  window.allCountries = new Countries();
  allCountries.fetch({
    url: "data/weights-mincut.json",
    success: function (collection, response, options) {
      // make the views
      window.mapView = new MapView({ el: $("#yt-map-container") });
    }
  });
  // show the instructions
  new InfoBoxView({ el: $("#yt-info-box"), title: "Explore the Map",
    content: '<p>This is a visual exploration of the most popular videos on YouTube.  Clicking a country highlights other countries where people watch the same videos.  The darker the country, the more they watch the same thing.  Click one of those countries and you can see the actual videos that people watch in both!</p><p>Created by the <a href="http://civic.mit.edu/">MIT Center for Civic Media</a>, based on data available on the public <a href="http://www.youtube.com/trendsdashboard">YouTube Trends website</a>.</p>'
  });
});
</script>

  </body>
</html>